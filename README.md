# 飲み会席順オプティマイザー

AIが飲み会の席順を最適化するWebアプリケーションです。

## 技術スタック

- **フロントエンド**: React + TypeScript + Tailwind CSS
- **バックエンド**: AWS Lambda (Python 3.12)
- **API**: API Gateway (REST API)
- **AI**: Amazon Bedrock (Claude 3.5 Sonnet)
- **IaC**: AWS CDK (TypeScript)

## プロジェクト構成

```
nomikai-optimizer/
├── frontend/          # React アプリ
├── lambda/            # Lambda 関数
├── cdk/               # AWS CDK
└── README.md
```

## セットアップ

### 1. フロントエンド

```bash
cd frontend
npm install
npm run dev
```

環境変数を設定する場合:

```bash
cp .env.example .env
# .env ファイルを編集して API エンドポイントを設定
```

### 2. Lambda関数

Lambda関数はCDKデプロイ時に自動的にデプロイされます。

ローカルでテストする場合:

```bash
cd lambda
pip install -r requirements.txt -t .
```

### 3. AWS CDKデプロイ

```bash
cd cdk
npm install
npm run build

# 初回のみブートストラップ
cdk bootstrap

# デプロイ
cdk deploy
```

デプロイ後、API GatewayのエンドポイントURLが出力されます。このURLをフロントエンドの環境変数に設定してください。

## 使用方法

1. フロントエンドを起動
2. 制約条件を選択（チェックボックス）
3. 「最適化実行」ボタンをクリック
4. AIが最適な席順を提案し、右カラムに理由が表示されます

## 参加者データ

- 山田部長（部長、52歳）
- 鈴木課長（課長、45歳）
- 田中主任（主任、38歳）
- 佐藤（新人、25歳）
- 高橋（一般、30歳）
- 伊藤（一般、32歳）
- 渡辺（一般、28歳）
- 中村（一般、35歳）

## 制約条件

1. 高橋と伊藤は隣にしないと拗ねる（デフォルト: ON）
2. 中村さんは21時に「終電が...」と言い出すので出口側に（デフォルト: ON）
3. 田中主任の声がでかいので部長の真正面は避ける（デフォルト: ON）
4. 新人の佐藤は渡辺の近くに（じゃないと孤立する）（デフォルト: ON）
5. 鈴木課長は部長の隣でヨイショ係（デフォルト: ON）
6. 田中主任と中村は昔カラオケの選曲で揉めたので離す（デフォルト: OFF）
7. 高橋も声でかいので田中主任と近づけると騒がしさが倍になる（デフォルト: OFF）

## 席レイアウト

```
      【上座】
  [1] [2] [3] [4]
  ─────テーブル─────
  [5] [6] [7] [8]
      【下座・出入口側】
```

- 隣り合う席: 1-2, 2-3, 3-4, 5-6, 6-7, 7-8
- 向かい合う席: 1-5, 2-6, 3-7, 4-8

## 注意事項

- Amazon Bedrockを使用するため、適切なIAM権限が必要です
- Claude 3.5 Sonnetモデルが利用可能なリージョンでデプロイしてください
- CORS設定は開発用に全オリジン許可になっています。本番環境では適切に制限してください
